<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sunuweer</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
  form{
    font-size: large;
    padding: 5rem;
  }
  .tooltip{
    display: none;
    color: rgb(175, 32, 7);
  }
  form label {
    display: inline-block;
    padding-bottom: 2rem;
  }
  form input[type=submit]{
    width: 180px;
    display: block;
    padding: 15px 22px;
    font-size: large;
    background: transparent;
    cursor: pointer;
   box-shadow: 5px 10px rgba(0, 0, 0, 0.19);
  }
  form input[type=submit]:hover{
    font-weight: bold;
    transform: translateY(-5px);
  }
</style>
</head>

<body>
  <nav class="navbar fixed">
    <div class="topnav" id="myTopnav">
    <a href="index.html" >Calendrier</a>
    <a href="#news">Rechercher une Date</a>
    <a href="sinscrire.html" class="active">Soyez Informe</a>
    <a href="javascript:void(0);" class="icon" onclick="hamburger()">
      <i class="fa fa-bars"></i>
    </a>
  </div>
  </nav>
<div id='particles-js' class="content" >
  <main>
    <h1>Saisir le mot de pass Administrateur pour se connecter </h1>
    <div>
     <form name="adminPass" id="adminPass">
       <label for="pwd">Entrer le mot de Passe Adminstrateur:</label><br>
       <input type="text" name="pwd" id="pass" minlength="5" required><br>
       <span class="tooltip">le mot ne peut faire moins de deux caracteres</span><br>
       
       <input type="button" name="authBtn" id="authBtn" value="SE CONNECTER"> <br>
     </form>
  
    </div>
  </main>
</div>
<footer>
  <h1>sunu weer</h1>
</footer>
<script>
            

  function hamburger() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
      x.className += " responsive";
    } else {
      x.className = "topnav";
    }
  }
document.getElementById("authBtn").addEventListener('click',(e)=>{
    e.preventDefault();
    console.log("in form handler")
    let password= document.getElementById('pass').value;
/*     let req = await fetch('/.netlify/functions/getword/getword.js', {
   method:'POST',
   body: JSON.stringify({"pwd":password })
});
const res = await req.json();
console.log("resp = "+res);
p.innerText=res;
            document.querySelector("main").insertBefore(p,document.querySelector("main div")); */


    var xhr = new XMLHttpRequest();
xhr.open("GET", "/.netlify/functions/getword/getword.js", true);

//Send the proper header information along with the request
 xhr.setRequestHeader("Content-Type", "application/json");
xhr.responseType="json";

xhr.onload =()=> { // Call a function when the state changes.
     if (this.readyState === XMLHttpRequest.DONE && this.status === 200) { 
        // Request finished. Do processing here.
        console.log("ready");
        console.log(JSON.parse(xhr.response))
     } 
}
xhr.onerror=()=>{
    console.log("err");
}
xhr.ontimeout=()=>{
    console.log("err timeout");
}
xhr.abort=()=>{
    console.log("err abort");
}
xhr.send(null);
/*     var form = new FormData(document.getElementById('adminPass')); */
  /*   fetch("/.netlify/functions/getword/getword.js",{
        method:"POST",
        body:password
    }).then((resp)=>{
        console.log(resp.text())
        if(resp.ok){
           

        }else{
            const p=document.createElement('p');
            console.log(resp.text())
            p.innerText="Mauvaise probleme du reseau";
            document.querySelector("main").insertBefore(p,document.querySelector("main div"));
        }

    }).catch((err)=>{
        const p=document.createElement('p');
            p.innerText="il ya eu un probleme: "+ err.message;
            document.querySelector("main").insertBefore(p,document.querySelector("main div"));
    });
 */
});
  </script>
  <!-- http://api.aladhan.com/v1/gToH?date=31-08-2020-->
      
  <script src="/js/particles.min.js"></script>
  <script src="/js/app.js"></script>
</body>

</html>