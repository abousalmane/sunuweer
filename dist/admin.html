<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sunuweer</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
  form{
    font-size: large;
    padding: 5rem;
  }
  .tooltip{
    display: none;
    color: rgb(175, 32, 7);
  }
  form label {
    display: inline-block;
    font-size: larger;
    padding-bottom: 2rem;
  }
  form input[type=button]{
    width: 190px;
    display: block;
    text-align: center;
    padding: 15px 22px;
    font-size: large;
    background: transparent;
    cursor: pointer;
   box-shadow: 5px 10px rgba(0, 0, 0, 0.19);
  }
  form input[type=button]:hover{
    font-weight: bold;
    transform: translateY(-5px);
  }
</style>
</head>

<body>
  <nav class="navbar fixed">
    <div class="topnav" id="myTopnav">
    <a href="index.html" >Calendrier</a>
    <a href="#news">Rechercher une Date</a>
    <a href="sinscrire.html" class="active">Soyez Informe</a>
    <a href="javascript:void(0);" class="icon" onclick="hamburger()">
      <i class="fa fa-bars"></i>
    </a>
  </div>
  </nav>
<div id='particles-js' class="content" >
  <main>
    <h1>Saisir le mot de pass Administrateur pour se connecter </h1>
    <div>
     <form name="adminPass" id="adminPass">
       <label for="pwd">Veillez saisir le mot de Passe Adminstrateur pour deÃÅmarrer un nouveau calendrier et envoyer les SMS aux inscrits </label><br>
       <input type="password" name="pwd" id="pass" minlength="5" required><br>
       <span class="tooltip">le mot ne peut faire moins de deux caracteres</span><br>
       
       <input type="button" name="authBtn" id="authBtn" value="SE CONNECTER "> <br>
     </form>
  
    </div>
  </main>
</div>
<footer>
  <h1>sunu weer</h1>
</footer>
<script>
            

  function hamburger() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
      x.className += " responsive";
    } else {
      x.className = "topnav";
    }
  }
document.getElementById("authBtn").addEventListener('click',(e)=>{
    e.preventDefault();
    let password= document.getElementById('pass').value;
/* const form = new FormData(document.getElementById('adminPass')); */

     fetch(`/login?pwd=${password}`,{
        method:"POST",
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        }
    }).then((resp)=>{
      console.log(resp.status); 
        if(resp.ok){

          resp.json().then(data =>{console.log(data)});

        }else if(resp.status==403){
          console.log("Mot de Passe Incorrrect");
        }
        
        else{
            const p=document.createElement('p');
            console.log(resp.text())
            p.innerText="Mauvaise probleme du reseau";
            document.querySelector("main").insertBefore(p,document.querySelector("main div"));
        }

    }).catch((err)=>{
        const p=document.createElement('p');
            p.innerText="il ya eu un probleme: "+ err.message;
            document.querySelector("main").insertBefore(p,document.querySelector("main div"));
    });
 
});
  </script>
  <!-- http://api.aladhan.com/v1/gToH?date=31-08-2020-->
      
  <script src="/js/particles.min.js"></script>
  <script src="/js/app.js"></script>
</body>

</html>